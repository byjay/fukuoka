<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE WORLD BUILDER | Cinematic Travel</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="./styles/hybrid.css">
</head>
<body>

    <!-- NAV -->
    <nav class="nav-bar">
        <div class="logo">WORLD BUILDER</div>
        <div class="nav-links">
            <a href="#" class="nav-item">Destinations</a>
            <a href="#" class="nav-item">Journal</a>
            <a href="#" class="nav-item" style="color: var(--accent-color)">Premium</a>
        </div>
    </nav>

    <!-- HERO -->
    <section class="hero">
        <video autoplay muted loop playsinline class="hero-video">
            <source src="https://videos.pexels.com/video-files/3205634/3205634-hd_1920_1080_25fps.mp4" type="video/mp4">
            <!-- Fallback video -->
        </video>
        <div class="hero-content">
            <div class="serif" style="color: var(--accent-color); margin-bottom: 20px;">The Art of Exploration</div>
            <h1 class="hero-title">Discover the Extraordinary</h1>
            <p class="hero-subtitle">Curated guides for the modern voyager. Built by AI, refined by design.</p>
        </div>
    </section>

    <!-- DESTINATIONS GRID -->
    <section class="container" id="destinations">
        <div class="section-title serif">Select Your Journey</div>
        
        <div class="grid" id="city-grid">
            <!-- Cities will be injected here -->
        </div>
    </section>

    <footer>
        <p>&copy; 2025 World Builder using Gemini 2.0 Flash. All Rights Reserved.</p>
    </footer>

    <!-- SCRIPTS -->
    <script src="./destinations.js"></script> <!-- Defines DESTINATIONS const -->
    <script src="./scripts/ui_core.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const grid = document.getElementById('city-grid');
            
            // Render Cities from DESTINATIONS
            // DESTINATIONS is loaded from destinations.js global var
            let delay = 0;
            
            for (const [country, cities] of Object.entries(DESTINATIONS)) {
                cities.forEach(cityFull => {
                    const cityName = cityFull.split('(')[0].trim();
                     // lowercase with underscores for data loading (e.g. osaka)
                    const cityCode = cityName.toLowerCase().replace(/\s+/g, '_');
                    
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.style.cursor = 'pointer';
                    // Random unsplash image for the city
                    const imgUrl = `https://source.unsplash.com/600x400/?${cityName},travel`;
                    
                    card.innerHTML = `
                        <img src="${imgUrl}" class="card-image" alt="${cityName}">
                        <div class="card-content">
                            <div class="card-meta">
                                <span>${country}</span>
                            </div>
                            <h3 class="card-title">${cityFull}</h3>
                            <div style="font-size: 0.9rem; opacity: 0.7; margin-top: 10px;">
                                Explore curated guide &rarr;
                            </div>
                        </div>
                    `;
                    
                    card.onclick = () => {
                        window.location.href = `city.html?city=${cityCode}&name=${encodeURIComponent(cityFull)}`;
                    };
                    
                    grid.appendChild(card);
                });
            }
        });
    </script>
</body>
</html>